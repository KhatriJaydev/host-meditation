{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"src/app/services/api.service\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = [\"fileInput\"];\nfunction PersonalDetailsComponent_div_22_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Only alphabets are allowed.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PersonalDetailsComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PersonalDetailsComponent_div_22_span_1_Template, 2, 0, \"span\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.apiService.profileUpdate == null ? null : (tmp_0_0 = ctx_r1.apiService.profileUpdate.get(\"firstName\")) == null ? null : tmp_0_0.hasError(\"pattern\"));\n  }\n}\nfunction PersonalDetailsComponent_div_28_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Only alphabets are allowed.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PersonalDetailsComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PersonalDetailsComponent_div_28_span_1_Template, 2, 0, \"span\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.apiService.profileUpdate == null ? null : (tmp_0_0 = ctx_r2.apiService.profileUpdate.get(\"lastName\")) == null ? null : tmp_0_0.hasError(\"pattern\"));\n  }\n}\nfunction PersonalDetailsComponent_span_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \" Email Already Exists.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PersonalDetailsComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Invalid email format. \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    \"show-popup\": a0\n  };\n};\nexport let PersonalDetailsComponent = /*#__PURE__*/(() => {\n  class PersonalDetailsComponent {\n    constructor(router, formbuilder, apiService) {\n      this.router = router;\n      this.formbuilder = formbuilder;\n      this.apiService = apiService;\n      this.profileUpdateModel = false;\n      this.imageUrl = '../../../../../assets/icons/PersonalDetails.svg';\n    }\n    // profileUpdate!: FormGroup;\n    openUploadProfile() {\n      this.fileInput.nativeElement.click();\n    }\n    goBack() {\n      this.router.navigate(['tabs', 'profile', 'settings']);\n    }\n    updateDetail() {\n      if (this.apiService.profileUpdate.get('firstName')?.valid || this.apiService.profileUpdate.get('lastName')?.valid || this.apiService.profileUpdate.get('email')?.valid || this.apiService.profileUpdate.get('file')?.valid) {\n        const formData = this.apiService.profileUpdate.value;\n        console.log('Request Payload:', formData);\n        this.apiService.profileUpdateForm().subscribe(response => {\n          console.log('upadte', response);\n          this.profileUpdateModel = true;\n        }, error => {\n          console.log('error', error);\n          if (error.error.message == 'Email Already Exists' && error.error.data == 409) {\n            this.apiService.profileUpdate.get('email')?.setErrors({\n              existEmail: true\n            });\n          }\n        });\n      } else {\n        console.log('Form is invalid. Please check the fields.');\n      }\n    }\n    handleFileInput(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.convertImageToData(file);\n        this.apiService.profileUpdate.get('file')?.setValue(file);\n      }\n    }\n    convertImageToData(file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        const base64 = e.target.result ?? '';\n        const base64Toblob = fetch(base64).then(response => response.blob()).then(myBlob => {\n          this.imageData = URL.createObjectURL(myBlob);\n          const objectURL = URL.createObjectURL(myBlob);\n        });\n      };\n      reader.readAsDataURL(file);\n    }\n    closePopup() {\n      this.profileUpdateModel = false;\n      this.router.navigate(['profile', 'settings']);\n    }\n    stopPropagation(event) {\n      event.stopPropagation();\n    }\n    ngOnInit() {\n      this.apiService.getUserInfo().subscribe(userInfo => {\n        this.imageData = environment.baseURL + userInfo?.data?.image;\n      });\n    }\n    static #_ = this.ɵfac = function PersonalDetailsComponent_Factory(t) {\n      return new (t || PersonalDetailsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.ApiService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PersonalDetailsComponent,\n      selectors: [[\"app-personal-details\"]],\n      viewQuery: function PersonalDetailsComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fileInput = _t.first);\n        }\n      },\n      decls: 58,\n      vars: 10,\n      consts: [[1, \"container\", \"main-container\"], [1, \"upper-section\"], [1, \"go-back\", \"d-flex\", \"align-items-center\", \"justify-content-center\", 3, \"click\"], [\"src\", \"../../../../../assets/icons/Go-back.svg\", 1, \"img-fluid\"], [1, \"content\"], [3, \"formGroup\"], [1, \"user-avatar\", \"d-flex\", \"flex-column\", \"align-items-center\"], [1, \"profile-preview\"], [\"id\", \"imagePreview\", 1, \"profile-preview-img\", 3, \"click\"], [\"type\", \"file\", \"id\", \"profilePreview\", 2, \"display\", \"none\", 3, \"change\"], [\"fileInput\", \"\"], [1, \"form-personal\"], [1, \"Fname\"], [\"formControlName\", \"firstName\"], [1, \"alert-msg\"], [4, \"ngIf\"], [1, \"Lname\"], [\"formControlName\", \"lastName\"], [1, \"Email\"], [\"formControlName\", \"email\"], [1, \"common-button\", 3, \"click\"], [\"src\", \"../../../../../assets/icons/GoForwardIconWhite.svg\", 1, \"img-fluid\"], [1, \"popup-container\", 3, \"ngClass\", \"click\"], [1, \"popup-content\", 3, \"click\"], [1, \"popup-inner\"], [1, \"popup-header\"], [\"width\", \"75\", \"height\", \"75\", \"viewBox\", \"0 0 75 75\", \"fill\", \"none\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"fill-rule\", \"evenodd\", \"clip-rule\", \"evenodd\", \"d\", \"M37.5 75C58.2107 75 75 58.2107 75 37.5C75 16.7893 58.2107 0 37.5 0C16.7893 0 0 16.7893 0 37.5C0 58.2107 16.7893 75 37.5 75Z\", \"fill\", \"#3A3B3B\"], [\"opacity\", \"0.01\", \"x\", \"18\", \"y\", \"18\", \"width\", \"40\", \"height\", \"40\", \"fill\", \"white\"], [\"fill-rule\", \"evenodd\", \"clip-rule\", \"evenodd\", \"d\", \"M47.5 56H32.5C31.6716 56 31 55.3284 31 54.5C31 53.6716 31.6716 53 32.5 53H47.5C48.3284 53 49 52.3284 49 51.5V45.275C48.9245 44.4333 48.4197 43.6903 47.665 43.31C41.7856 40.9362 35.2144 40.9362 29.335 43.31C28.5803 43.6903 28.0755 44.4333 28 45.275V54.5C28 55.3284 27.3284 56 26.5 56C25.6716 56 25 55.3284 25 54.5V45.275C25.0663 43.2045 26.3145 41.3556 28.21 40.52C34.8107 37.8527 42.1893 37.8527 48.79 40.52C50.6855 41.3556 51.9337 43.2045 52 45.275V51.5C52 53.9853 49.9853 56 47.5 56ZM46 27.5C46 23.3579 42.6421 20 38.5 20C34.3579 20 31 23.3579 31 27.5C31 31.6421 34.3579 35 38.5 35C42.6421 35 46 31.6421 46 27.5ZM43 27.5C43 29.9853 40.9853 32 38.5 32C36.0147 32 34 29.9853 34 27.5C34 25.0147 36.0147 23 38.5 23C40.9853 23 43 25.0147 43 27.5Z\", \"fill\", \"white\"], [1, \"pop-up-title\"]],\n      template: function PersonalDetailsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"header\")(3, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function PersonalDetailsComponent_Template_button_click_3_listener() {\n            return ctx.goBack();\n          });\n          i0.ɵɵelement(4, \"img\", 3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"span\");\n          i0.ɵɵtext(6, \"Personal Details\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"section\", 4)(8, \"form\", 5)(9, \"div\", 6)(10, \"div\", 7)(11, \"div\", 8);\n          i0.ɵɵlistener(\"click\", function PersonalDetailsComponent_Template_div_click_11_listener() {\n            return ctx.openUploadProfile();\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"label\");\n          i0.ɵɵtext(13, \"Change Your Profile Image\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"input\", 9, 10);\n          i0.ɵɵlistener(\"change\", function PersonalDetailsComponent_Template_input_change_14_listener($event) {\n            return ctx.handleFileInput($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"div\", 11)(17, \"div\", 12)(18, \"label\");\n          i0.ɵɵtext(19, \"First name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(20, \"input\", 13);\n          i0.ɵɵelementStart(21, \"div\", 14);\n          i0.ɵɵtemplate(22, PersonalDetailsComponent_div_22_Template, 2, 1, \"div\", 15);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(23, \"div\", 16)(24, \"label\");\n          i0.ɵɵtext(25, \"Last Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(26, \"input\", 17);\n          i0.ɵɵelementStart(27, \"div\", 14);\n          i0.ɵɵtemplate(28, PersonalDetailsComponent_div_28_Template, 2, 1, \"div\", 15);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(29, \"div\", 18)(30, \"label\");\n          i0.ɵɵtext(31, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(32, \"input\", 19);\n          i0.ɵɵelementStart(33, \"div\", 14)(34, \"div\");\n          i0.ɵɵtemplate(35, PersonalDetailsComponent_span_35_Template, 2, 0, \"span\", 15);\n          i0.ɵɵtemplate(36, PersonalDetailsComponent_div_36_Template, 2, 0, \"div\", 15);\n          i0.ɵɵelementEnd()()()()()()();\n          i0.ɵɵelementStart(37, \"footer\")(38, \"button\", 20);\n          i0.ɵɵlistener(\"click\", function PersonalDetailsComponent_Template_button_click_38_listener() {\n            return ctx.updateDetail();\n          });\n          i0.ɵɵelementStart(39, \"span\");\n          i0.ɵɵtext(40, \"Update\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(41, \"img\", 21);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(42, \"div\", 22);\n          i0.ɵɵlistener(\"click\", function PersonalDetailsComponent_Template_div_click_42_listener() {\n            return ctx.closePopup();\n          });\n          i0.ɵɵelementStart(43, \"div\", 23);\n          i0.ɵɵlistener(\"click\", function PersonalDetailsComponent_Template_div_click_43_listener($event) {\n            return ctx.stopPropagation($event);\n          });\n          i0.ɵɵelementStart(44, \"div\", 24)(45, \"div\", 25);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(46, \"svg\", 26);\n          i0.ɵɵelement(47, \"path\", 27)(48, \"rect\", 28)(49, \"path\", 29);\n          i0.ɵɵelementEnd();\n          i0.ɵɵnamespaceHTML();\n          i0.ɵɵelementStart(50, \"div\", 30)(51, \"h6\");\n          i0.ɵɵtext(52, \"Name and Email Updated\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(53, \"p\");\n          i0.ɵɵtext(54, \"You have successfully updated your full name.\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(55, \"button\", 20);\n          i0.ɵɵlistener(\"click\", function PersonalDetailsComponent_Template_button_click_55_listener() {\n            return ctx.closePopup();\n          });\n          i0.ɵɵelementStart(56, \"span\");\n          i0.ɵɵtext(57, \"Done\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          let tmp_4_0;\n          let tmp_5_0;\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"formGroup\", ctx.apiService.profileUpdate);\n          i0.ɵɵadvance(3);\n          i0.ɵɵstyleProp(\"background-image\", ctx.imageData ? \"url(\" + ctx.imageData + \")\" : \"url(\" + ctx.imageUrl + \")\");\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"ngIf\", ctx.apiService.profileUpdate.controls[\"firstName\"].invalid && (ctx.apiService.profileUpdate.controls[\"firstName\"].dirty || ctx.apiService.profileUpdate.controls[\"firstName\"].touched));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngIf\", ctx.apiService.profileUpdate.controls[\"lastName\"].invalid && (ctx.apiService.profileUpdate.controls[\"lastName\"].dirty || ctx.apiService.profileUpdate.controls[\"lastName\"].touched));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngIf\", ctx.apiService.profileUpdate == null ? null : (tmp_4_0 = ctx.apiService.profileUpdate.get(\"email\")) == null ? null : tmp_4_0.hasError(\"existEmail\"));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.apiService.profileUpdate == null ? null : (tmp_5_0 = ctx.apiService.profileUpdate.get(\"email\")) == null ? null : tmp_5_0.hasError(\"pattern\"));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(8, _c1, ctx.profileUpdateModel));\n        }\n      },\n      dependencies: [i4.NgClass, i4.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n      styles: [\".main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100%}.upper-section[_ngcontent-%COMP%]{display:flex;gap:30px;flex-direction:column}header[_ngcontent-%COMP%]{padding:16px 12px 10px;display:flex;align-items:flex-start;position:relative;justify-content:center}header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:16px;left:12px}header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:22px;font-weight:700;line-height:29px;letter-spacing:0px;text-align:center}.content[_ngcontent-%COMP%]{padding:0 12px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;gap:24px;flex-direction:column}.content[_ngcontent-%COMP%]   .profile-preview[_ngcontent-%COMP%]{width:80px;height:80px;display:flex;align-items:center;justify-content:center}.content[_ngcontent-%COMP%]   .profile-preview[_ngcontent-%COMP%]   .profile-preview-img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:50%;background:no-repeat;background-size:cover}.content[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:8px}.content[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1a202c;margin-top:8px;font-size:12px;font-weight:400;line-height:20px;letter-spacing:0px;text-align:center}.content[_ngcontent-%COMP%]   .form-personal[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.content[_ngcontent-%COMP%]   .form-personal[_ngcontent-%COMP%]   .alert-msg[_ngcontent-%COMP%]{height:15px}.content[_ngcontent-%COMP%]   .form-personal[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;font-size:15px;font-weight:400;line-height:20px;letter-spacing:0px;text-align:left;color:#1a202c}.content[_ngcontent-%COMP%]   .form-personal[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:1rem;border:2px solid rgb(121,122,126);border-radius:10rem}.content[_ngcontent-%COMP%]   .form-personal[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#797a7e;margin-top:-5px}.content[_ngcontent-%COMP%]   .form-personal[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:15px;font-weight:400;line-height:20px;letter-spacing:0px;text-align:left;color:#1a202c}footer[_ngcontent-%COMP%]{padding:0 12px;margin-bottom:16px}.popup-container[_ngcontent-%COMP%]{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);justify-content:center;align-items:center;opacity:0;pointer-events:none;z-index:10}.show-popup[_ngcontent-%COMP%]{display:flex;opacity:1;pointer-events:auto;animation:_ngcontent-%COMP%_fadeIn .2s both;padding:0 30px}.popup-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:22px;transform:scale(.7);opacity:0;padding:30px}.popup-content[_ngcontent-%COMP%]   .popup-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:60px}.popup-content[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px;justify-content:center;align-items:center}.popup-content[_ngcontent-%COMP%]   .pop-up-title[_ngcontent-%COMP%]{letter-spacing:0px;text-align:center}.popup-content[_ngcontent-%COMP%]   .pop-up-title[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:25px;font-weight:700;line-height:33px}.popup-content[_ngcontent-%COMP%]   .pop-up-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;font-size:17px;font-weight:400;line-height:23px}.show-popup[_ngcontent-%COMP%]   .popup-content[_ngcontent-%COMP%]{transform:scale(1);opacity:1}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}\"]\n    });\n  }\n  return PersonalDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}